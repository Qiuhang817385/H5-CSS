<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body{
            margin:0;
            padding:0;
        }
        .pubu{
            width:1100px;
            position:absolute;
            left:50%;
            margin-left:-550px;
        }
        .box{
            padding:20px 0 0 20px;
            float: left;
        }
        .box img{
            width:200px;
            height:auto;
            opacity:0;
        }
    </style>
</head>
<body>
<div class="pubu">
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/柯南.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/工藤有希子.jpg" src="images/柯南.jpg" alt="">
    </div>
    <div class="box">
        <img data-original="images/兰.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/安室透.jpeg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/赤井秀一.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/目暮十三.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/怪盗基德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/步美.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/基安蒂.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/远山和叶.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/毛利小五郎.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/妃英理.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/佐藤美和子.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/博士.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/服部平次.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/灰原哀.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/贝尔摩德.jpg" alt="" src="images/柯南.jpg">
    </div>
    <div class="box">
        <img data-original="images/铃木园子.jpg" alt="" src="images/柯南.jpg">
    </div>
</div>
</body>
</html>
<script>
    /*
    * html css javascript（面向对象 ES6 懒加载 深浅拷贝 原型原型链）bootstrap MUI angular vue react node Webpack 小程序
    * */
    window.onload=function(){
       let oBox = document.getElementsByClassName('box');
       let oImg = document.getElementsByTagName('img');
    //    alert(oBox.length)180
    //    alert(oImg.length)180
        let oBoxw = oBox[0].offsetWidth;
        // offsetWidth 水平方向 width + 左右padding + 左右border-width
        let cols = 5;
        loadImg(oImg);
        window.onscroll=function(){
            loadImg(oImg);
        }

        // 瀑布流布局*************************这里不懂
        //ele,元素
        //cols = col = 5
        //元素宽度
        // oBox,cols,oBoxw=固定的图片大小
        // 瀑布流要实现的要求
            // 1    图片宽度一致
            //2     图片高度不一致
        function waterFall(ele,col,eleWidth){
            var h = [];
            //ele.length    元素的个数180
            for(let i=0;i<ele.length;i++){
                if(i<col){
                    //????不懂,一行图片的个数?
                    // 就是一行图片的个数

                    h.push(ele[i].offsetHeight);
                    //获取每一行图片,水平排列的时候最小值
                    
                }else{
                    //
                    let minH = Math.min.apply(null,h);
                    let index = h.indexOf(minH);//获取指定的最小高度
                    ele[i].style.position='absolute';
                    ele[i].style.top = minH+'px';
                    ele[i].style.left = index * eleWidth +'px';
                    h[index] += ele[i].offsetHeight;
                }
            }

        }
                //上面不懂

        //图片懒加载
        function loadImg(arr){
            for(let i=0;i<arr.length;i++){
                // Element.getBoundingClientRect()方法返回元素的大小及其相对于视口的位置。
                // getBoundingClientRect用于获取某个元素相对于视窗的位置集合。集合中有top, right, bottom, left等属性。
                // 返回值类型
                // rectObject.top：元素上边到视窗上边的距离;
                // rectObject.right：元素右边到视窗左边的距离;
                // rectObject.bottom：元素下边到视窗上边的距离;
                // rectObject.left：元素左边到视窗左边的距离;
                // 将<img>标签设置一个属性isLoad=“false”表示是否加载成功
                    // isLoad="false"
                if(arr[i].getBoundingClientRect().top<document.documentElement.clientHeight&&!arr[i].isLoad){
                    arr[i].isLoad = true;
                    if(arr[i].dataset){
                        // dataset表示自定义属性
                        // 属性名称 data-abc-def 与键值 abcDef 相对应。
                        aftloadimg(arr[i],arr[i].dataset.original);
                    }else{
                        aftloadimg(arr[i],arr[i].getAttribute("data-original"));
                    }
                    arr[i].style.cssText = "transition:opacity 4s;opacity:1;";
                }
            }
        }
        function aftloadimg(obj,url){
            obj.src = url;
            waterFall(oBox,cols,oBoxw);
        }

    }


</script>


