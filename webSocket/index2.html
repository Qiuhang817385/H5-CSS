<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>socket.io2</title>
</head>

<body>
    <h2>socket.io2</h2>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        window.onload = function () {
            // function send() {
            //     var args = toArray(arguments);
            //     args.unshift('message');
            //     this.emit.apply(this, args);
            //     return this;
            // }

            // var socket2 = io.connect('/news');
            let socket2 =io('http://localhost/news');


            socket2.on('connect', function () {
                console.log('客户端2连接成功');
                //客户端连接成功后发送消息'welcome'
                socket2.send('welcome2');
            });
            // connect函数可以接受一个url参数
            // url可以socket服务的http完整地址，也可以是相对路径，
            // 如果省略则表示默认连接当前路径 
            
            //客户端收到服务器发过来的消息后触发
            socket2.on('message', function (message) {
                console.log(message);
            });
            
            //监听与服务器端断开连接事件
            socket2.on('disconnect', function () {
                console.log('断开连接');
            });
            // socket2.join('content');//进入chat房间
        };
    </script>
</body>

</html>